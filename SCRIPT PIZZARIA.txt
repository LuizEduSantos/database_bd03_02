CREATE DATABASE pizzaria;
USE pizzaria;

CREATE TABLE bairro(
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
nome VARCHAR(40) NOT NULL,
tempo INT NOT NULL
);

CREATE TABLE endereco(
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
rua VARCHAR(40) NOT NULL,
conjunto VARCHAR(40) NOT NULL,
ponto_referencia VARCHAR(100),
cep VARCHAR(15),
id_bairro INT NOT NULL,
FOREIGN KEY (id_bairro) REFERENCES bairro(id)
);

CREATE TABLE cliente(
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
nome VARCHAR(40) NOT NULL,
id_endereco INT NOT NULL,
FOREIGN KEY (id_endereco) REFERENCES endereco(id)
);

CREATE TABLE funcao(
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
nome VARCHAR(40) NOT NULL
);

CREATE TABLE funcionario(
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
nome VARCHAR(40) NOT NULL,
celular VARCHAR(15) NOT NULL,
id_funcao INT NOT NULL,
FOREIGN KEY (id_funcao) REFERENCES funcao(id)
);

CREATE TABLE ingrediente(
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
nome VARCHAR(40) NOT NULL
);

CREATE TABLE pizza(
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
nome VARCHAR(40) NOT NULL,
tamanho VARCHAR(10) NOT NULL,
preco NUMERIC(4,2) NOT NULL
);

CREATE TABLE ingrediente_pizza(
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
id_pizza INT NOT NULL,
id_ingrediente INT NOT NULL,
FOREIGN KEY (id_pizza) REFERENCES pizza(id),
FOREIGN KEY (id_ingrediente) REFERENCES ingrediente(id)
);

CREATE TABLE cardapio(
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
nome VARCHAR(40) NOT NULL,
id_pizza INT NOT NULL,
FOREIGN KEY (id_pizza) REFERENCES pizza(id)
);

CREATE TABLE pedido(
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
data_emissao DATE NOT NULL DEFAULT CURRENT_DATETIME,
id_cliente INT NOT NULL,
id_atendente INT NOT NULL,
id_entregador INT,
FOREIGN KEY (id_cliente) REFERENCES cliente(id),
FOREIGN KEY (id_atendente) REFERENCES funcionario(id),




FOREIGN KEY (id_entregador) REFERENCES funcionario(id)
);


CREATE TABLE itempedido(
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
qtd INT NOT NULL,
id_pedido INT NOT NULL,
id_pizza INT NOT NULL,
FOREIGN KEY (id_pizza) REFERENCES pizza(id),
FOREIGN KEY (id_pedido) REFERENCES pedido(id)
);

INSERT INTO bairro VALUES (NULL,'CENTRO', 20),(NULL,'ALVORADA', 40),(NULL,'PONTA NEGRA', 50),(NULL,'CIDADE NOVA', 60),(NULL,'SÃO JOSÉ', 50),(NULL,'JAPIIM', 40);

INSERT INTO endereco VALUES (NULL,'10 DE JULHO','TEATRO','RUA DO TEATRO','69099-000',1),
(NULL,'TABIRA','AJURICABA','QUADRA DE AREIA','69023-567',2),
(NULL,'NOVA','RESIDENCIAL PN 1','ANFITEATRO','69049-632',3),
(NULL,'ITAVUVU','OSWALDO FROTA','ESTACAO DE ONIBUS','69643-230',4),
(NULL,'ALMIRANTES','SHANGRILA','BOLA DO MINDU','69043-532',5);

INSERT INTO cliente VALUES (NULL,'LUIZ EDUARDO',1),(NULL,'FABIO',2),(NULL,'ADIELSON',3),(NULL,'LUIZ FERNANDO',4),(NULL,'RAMON',5);

INSERT INTO funcao VALUES (NULL,'ATENDENTE'),(NULL,'ENTREGADOR');

INSERT INTO funcionario VALUES (NULL,'MARIA JOAQUINA','(92)98321-2321',1),(NULL,'LUCIO MAURO','(97)92467-2532',2),(NULL,'GRAZI','(92)91466-4567',1),(NULL,'GRAZI','(92)99322-6778',2);

INSERT INTO ingrediente(nome) VALUES('CARNE MOÍDA'),('Margherita'),('BACON'),('MUSSARELA'),('CEBOLA'),('AZEITONA PRETA'),('FRANGO'),('ANCHOVA'),('ATUM'),('REQUEIJÃO'),('PARMESÃO'),('TOMATE SECO'),('LOMBO');

INSERT INTO pizza (NULL,'MUSSARELA','PEQUENA',10.00),(NULL,'MUSSARELA','GRANDE',20.00),(NULL,'MUSSARELA','FAMILIA',30.00),
(NULL,'CALABRESA','PEQUENA',12.00),(NULL,'CALABRESA','GRANDE',22.00),(NULL,'CALABRESA','FAMILIA',34.00),
(NULL,'PORTUGUESA','PEQUENA',15.00),(NULL,'MUSSARELA','GRANDE',23.00),(NULL,'MUSSARELA','FAMILIA',40.00),
(NULL,'FRANGO CATUPIRY','PEQUENA',12.00),(NULL,'FRANGO CATUPIRY','GRANDE',26.00),(NULL,'FRANGO CATUPIRY','FAMILIA',51.00),
(NULL,'HAVAIANA','PEQUENA',12.00),(NULL,'HAVAIANA','GRANDE',24.00),(NULL,'HAVAIANA','FAMILIA',50.00);